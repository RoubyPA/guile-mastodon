#+TITLE: Guile-Mastodon
#+STARTUP: indent

* Installation

** Use autotools

Guile-mastodon use autotools build system.

#+BEGIN_SRC shell
./bootstrap
./configure
make
make install
#+END_SRC

** Use GNU Guix

Guile-mastodon is available with local Guix package.

#+BEGIN_SRC shell
guix build -f guix.scm
guix package -f guix.scm
#+END_SRC


* Using

** Create new instance record

#+BEGIN_SRC scheme
  (use-modules (mastodon types)

  ;; Create new instance with token
  (instance "Framapiaf"              ;; Instance name
            "https://framapiaf.org"  ;; Instance url
            "<acces_token>")         ;; Access token
#+END_SRC

** New status

Post a new status on mastodon instance.

#+BEGIN_SRC scheme
  (use-modules (mastodon))

  (let ((my-inst (instance "Framapiaf"
                           "https://framapiaf.org"
                           "<acces_token>")))
    (new-status my-inst
                #:status "Hello from guile-mastodon !"))
#+END_SRC
