#+title: Guile-mastodon functions.
#+startup: indent

* Top level functions

Top level functions is more user frendly function.

** Function =new-status=

For more information see the [[https://docs.joinmastodon.org/api/rest/statuses/][Mastodon documentations]].

| Args           | Type                | Description                         | Default value   |
|----------------+---------------------+-------------------------------------+-----------------|
| inst           | <mastodon-mastodon> | Instance to use                     | None (Required) |
| status         | String              | Text of status                      | ""              |
| in-reply-to-id | String              | Id of status                        | ""              |
| media-ids      | List of String      | List of media ids to use in status  | '()             |
| sensitive      | Boolean             | True if status content is NSFW      | #f              |
| spoiler-text   | String              | Spoiler text                        | ""              |
| visibility     | String              | Direct, private, unlisted or public | "public"        |
| language       | String              | Override language code (ISO 639-2)  | ""              |
| auto-pinned    | Boolean             | Pin the new status                  | #f              |
| auto-reblog    | Boolean             | Reblog the neww status              | #f              |



* Low level functions

** Accounts

*** Function =mtd-accounts-by-id=

Get account by id.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Account id      |

*** Function =mtd-accounts-verify-credentials=

Get current account.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |

*** Function =mtd-accounts-id-followers=

Get account followers.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Account id      |

*** Function =mtd-accounts-id-follow=

Follow an account.

| Args     | Type                | Description       |
|----------+---------------------+-------------------|
| instance | <mastodon-mastodon> | Instance to use   |
| id       | String              | Account to follow |

*** Function =mtd-accounts-id-unfollow=

Unfollow an account.

| Args     | Type                | Description         |
|----------+---------------------+---------------------|
| instance | <mastodon-mastodon> | Instance to use     |
| id       | String              | Account to unfollow |

*** Function =mtd-accounts-id-following=

Following accounts for accounts id.

| Args     | Type                | Description         |
|----------+---------------------+---------------------|
| instance | <mastodon-mastodon> | Instance to use     |
| id       | String              | Account id          |

*** Function =mtd-accounts-id-statuses=

Status of account.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Account id      |

*** Function =mtd-accounts-search=

Search an accounts by username, domain and display name.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| name     | String              | Query           |



** Apps

*** Function =mtd-apps-verify-credentials=

Confirm that the app’s OAuth2 credentials work.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |


** Blocks

*** Function =mtd-account-blocked=

Accounts the user has blocked.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |

*** Function =mtd-account-block=

Block an account.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Account id      |

*** Function =mtd-account-unblock=

Unblock an account.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Account id      |


** Emojis

*** Function =mtd-custom-emojis=

Custom emojis that are available on the server.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |



** Domain blocks

*** Function =mtd-domain-blocked=

Domains the user has blocked.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |

*** Function =mtd-domain-block=

Block a domain to hide all public posts from it, all notifications from it,
and remove all followers from it.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| domain   | String              | Domain url      |

*** Function =mtd-domain-unblock=

Remove a domain block.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| domain   | String              | Domain url      |


** Endorsements

*** Function =mtd-endorsed=

List of Endorsements accounts.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |

*** Function =mtd-endorse=

Endorse an account, i.e. choose to feature the account on the user’s public
profile.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Account id      |

*** Function =mtd-unendorse=

Undo endorse of an account.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Account id      |


** Favourites

*** Function =mtd-favourited=

Statuses the user has favourited. Return list of status.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |

*** Function =mtd-favourite-status=

Favourite a status. Return Status.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Status id       |

*** Function =mtd-unfavourite-status=

Undo the favourite of a status. Return Status.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Status id       |



** Instance

*** Function =mtd-instance-info=

Get information about the server.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |


** Statuses

*** Function =mtd-status-by-id=

Get status coresponding to ID. Return status.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Status id       |

*** Function =mtd-status-context-by-id=

Get status context coresponding to ID. Return context.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Status id       |

*** Function =mtd-status-card-by-id=

Get status card coresponding to ID. Return card.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Status id       |

*** Function =mtd-status-id-reblogged-by=

Get list of accounts who reblogged status coresponding to ID. Return list of
accounts.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Status id       |

*** Function =mtd-status-id-favourited-by=

Get list of accounts who favourited status coresponding to ID. Return list of
accounts.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Status id       |

*** Function =mtd-delete-status-by-id=

Delete status coresponding to ID.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Status id       |

*** Function =mtd-new-status=

Post a new status on instance. Return status.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| args     | List                | List of args    |

**** Parameters

ARGS is list of parameters. You need to provide "status" and/or
"media_ids".

#+BEGIN_SRC scheme
;; Parameters format
'((arg1 . value1)
  (arg2 . value2)
  ...)
#+END_SRC

| Parameters     | Description                                             |
|----------------+---------------------------------------------------------|
| status         | The text of the status                                  |
| in_reply_to_id | ID of the status you want to reply to                   |
| media_ids      | Array of media IDs to attach to the status              |
| sensitive      | Mark the media in the status as sensitive               |
| spoiler_text   | Text to be shown as a warning before the actual content |
| visibility     | One of direct, private, unlisted public                 |
| language       | ride language code of the toot (ISO 639-2)              |

*** Function =mtd-status-id-reblog=

Reblog status coresponding to ID. Return status.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Status id       |

*** Function =mtd-status-id-unreblog=

Unreblog status coresponding to ID. Return status.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Status id       |

*** Function =mtd-status-id-pin=

Pin status coresponding to ID. Return status.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Status id       |

*** Function =mtd-status-id-unpin=

Unpin status coresponding to ID. Return status.

| Args     | Type                | Description     |
|----------+---------------------+-----------------|
| instance | <mastodon-mastodon> | Instance to use |
| id       | String              | Status id       |


** Search

*** Function =mtd-search=



** Media

*** Function =mtd-post-media=


** Mutes

*** Function =mtd-muted=
*** Function =mtd-mute=
*** Function =mtd-unmute=
*** Function =mtd-status-mute=
*** Function =mtd-status-unmute=
